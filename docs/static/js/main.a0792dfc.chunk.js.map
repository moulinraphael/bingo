{"version":3,"sources":["sounds/mk64_firstplace.wav","sounds/mk64_loser.wav","sounds/mk64_racestart.wav","sounds/mk64_multiplayerstart.wav","sounds/mk64_finallap.wav","utils/firebase.js","components/Case.js","components/HeaderCase.js","components/Sound.js","components/Grid.js","components/GameInfo.js","components/PlayerForm.js","components/AdminPlayerGrid.js","components/AdminPlayer.js","components/Admin.js","components/Message.js","utils/numbers.js","App.js","index.js"],"names":["module","exports","Firebase","initializeApp","databaseURL","err","test","message","console","error","stack","styles","free","color","fontSize","background","borderColor","common","margin","borderRadius","height","border","display","alignItems","justifyContent","hover","cursor","selected","hoverSelected","checked","mistake","Case","props","mouseToggle","setState","toggle","toggleNumber","number","state","this","style","playerNumbers","indexOf","gameNumbers","includes","finish","onMouseEnter","onMouseLeave","onClick","React","Component","softColors","boldColors","container","circle","width","activated","index","HeaderCase","gridNumbers","splice","every","letter","sounds","first","sound_first","loser","sound_loser","start","sound_start","begin","sound_begin","final","sound_final","Sound","sound","beep","Uifx","setVolume","play","bingo","split","wrapper","gridTemplate","gridAutoFlow","header","gridTemplateColumns","Grid","map","count","flex","game","padding","fontWeight","player","paddingRight","quit","GameInfo","admin","gameName","quitGame","length","playersCount","playerName","textAlign","menuOpened","maxWidth","menuClosed","textDecoration","marginTop","form","borderTop","label","input","outline","borderBottom","field","marginRight","boxSizing","go","goActivated","PlayerForm","toggleForm","futureForm","formOpened","pass","changeFormOpened","changeValue","event","target","value","changeGameName","changePlayerName","createGame","htmlFor","id","onChange","joinGame","type","marginBottom","oversight","grid","AdminPlayerGrid","styleNumber","winner","title","AdminPlayer","name","auto","numbers","drawn","draw","reinit","list","allNumbers","Array","keys","Admin","drawNumber","players","startMatch","key","reinitMatch","cancelMatch","position","top","right","left","bottom","minHeight","opacity","actions","button","confirm","cancel","Message","ok","callback","getContent","content","data","timer","clearTimeout","timeout","setTimeout","removeMessage","generateNumbers","withFree","generateBlockNumbers","generateBlockNumbersWithFree","from","to","sort","Math","random","x","slice","freePosition","newNumber","GAME_EMPTY","hash","PLAYER_EMPTY","images","App","games","child","off","orderByChild","equalTo","remove","gameKey","once","snap","set","val","initGame","reinitGame","maybeCreate","drawNewMaybe","submitGrid","compareGrid","displayMessage","MESSAGES","default","push","searchGame","Object","values","trim","toLowerCase","playerKey","paint","on","newNumbers","then","gamePass","gameHash","ref","askCancel","askReinit","fullGrid","src","floor","alt","eliminated","notExists","newNumberAdmin","badHash","announceWinner","displayWinner","waitGame","inProgress","zeroPlayer","cleanGame","database","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a0792dfc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/mk64_firstplace.8c2cc698.wav\";","module.exports = __webpack_public_path__ + \"static/media/mk64_loser.51310d77.wav\";","module.exports = __webpack_public_path__ + \"static/media/mk64_racestart.bd61c949.wav\";","module.exports = __webpack_public_path__ + \"static/media/mk64_multiplayerstart.fc64c37d.wav\";","module.exports = __webpack_public_path__ + \"static/media/mk64_finallap.3d63ec69.wav\";","import Firebase from 'firebase';\n\nconst config = {\n  databaseURL: \"https://bingo-voisinage.firebaseio.com\",\n};\n\ntry {\n  Firebase.initializeApp(config);\n} catch (err) {\n  // we skip the \"already exists\" message which is\n  // not an actual error when we're hot-reloading\n  if (!/already exists/.test(err.message)) {\n    console.error('Firebase initialization error', err.stack);\n  }\n}\n\nexport default Firebase;\n","import React from 'react';\n\nconst styles = {\n  free: {\n    color: '#666',\n    fontSize: '1em',\n    background: '#DDD',\n    borderColor: '#666',\n  },\n  common: {\n    margin: 10,\n    borderRadius: 4,\n    height: 60,\n    border: '1px solid #DDD',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '1.5em',\n    color: '#999',\n  },\n  hover: {\n    color: '#666',\n    border: '1px solid #AAA',\n    background: '#EEE',\n    cursor: 'pointer',\n  },\n  selected: {\n    color: '#EA3',\n    border: '1px solid #EA3',\n    background: '#FEA',\n  },\n  hoverSelected: {\n    color: '#C92',\n    border: '1px solid #C92',\n    background: '#ED9',\n  },\n  checked: {\n    border: '1px solid #6C6',\n    background: '#EFE',\n    color: '#6C6',\n  },\n  mistake: {\n    border: '1px solid #C66',\n    background: '#FEE',\n    color: '#C66',\n  },\n};\n\nclass Case extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hover: false,\n    };\n  }\n\n  mouseToggle = hover => (() => {\n    this.setState({hover: hover});\n  });\n\n  toggle = () => {\n    this.props.toggleNumber(this.props.number);\n  };\n\n  render() {\n    if (this.props.number === '_') {\n      return (\n        <div style={{...styles.common, ...styles.free}}>\n          FREE\n        </div>\n      );\n    }\n\n    const selected = this.props.playerNumbers.indexOf(this.props.number) >= 0;\n    const mistake = !this.props.gameNumbers.includes(this.props.number);\n    return (\n      <div\n        style={{\n          ...styles.common,\n          ...(selected && styles.selected),\n          ...(selected && this.props.finish && !mistake && styles.checked),\n          ...(selected && this.props.finish && mistake && styles.mistake),\n          ...(!this.props.finish && this.state.hover && styles.hover),\n          ...(!this.props.finish && this.state.hover && selected && styles.hoverSelected),\n        }}\n        onMouseEnter={this.mouseToggle(true)}\n        onMouseLeave={this.mouseToggle(false)}\n        onClick={!this.props.finish && this.toggle}\n      >\n        {this.props.number}\n      </div>\n    );\n  }\n}\n\nexport default Case;\n","import React from 'react';\n\nconst softColors = ['#00A', '#FA0', '#0A0', '#F00', '#A0A'];\nconst boldColors = ['#EEF', '#FED', '#EFE', '#FEE', '#FEF'];\nconst styles = {\n  container: {\n  },\n  circle: {\n    margin: '20px auto',\n    borderRadius: '50%',\n    background: '#EEE',\n    color: '#DDD',\n    height: 70,\n    width: 70,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: '250%',\n  },\n  activated: (index) => ({\n    background: softColors[index],\n    color: boldColors[index],\n  }),\n};\n\nclass HeaderCase extends React.Component {\n  render() {\n    const columnNumbers = [...this.props.gridNumbers].splice(5 * this.props.index, 5);\n    const activated = columnNumbers.every(number => number === '_' || this.props.playerNumbers.includes(number));\n\n    return (\n      <div style={styles.container}>\n        <div style={{\n          ...styles.circle,\n          ...(activated && styles.activated(this.props.index))\n        }}>\n          {this.props.letter}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default HeaderCase;\n","import React from 'react';\nimport Uifx from 'uifx';\nimport sound_first from '../sounds/mk64_firstplace.wav';\nimport sound_loser from '../sounds/mk64_loser.wav';\nimport sound_start from '../sounds/mk64_racestart.wav';\nimport sound_begin from '../sounds/mk64_multiplayerstart.wav';\nimport sound_final from '../sounds/mk64_finallap.wav';\n\nconst sounds = {\n  first: sound_first,\n  loser: sound_loser,\n  start: sound_start,\n  begin: sound_begin,\n  final: sound_final,\n};\nclass Sound extends React.Component {\n  constructor(props) {\n    super(props);\n\n    if (sounds[this.props.sound]) {\n      this.beep = new Uifx(sounds[this.props.sound]);\n      this.beep.setVolume(1);\n      this.beep.play();\n    }\n  }\n\n  componentWillUnmount() {\n    this.beep.setVolume(0);\n  }\n\n  render() {\n    return (<div></div>);\n  }\n}\n\nexport default Sound;\n","import React from 'react';\nimport Case from './Case';\nimport HeaderCase from './HeaderCase';\nimport Sound from './Sound';\n\nconst bingo = 'BINGO'.split('');\nconst styles = {\n  container: {\n  },\n  wrapper: {\n    display: 'grid',\n    gridTemplate: 'repeat(5, 1fr) / repeat(5, 1fr)',\n    gridAutoFlow: 'column',\n  },\n  header: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(5, 1fr)',\n  },\n};\n\nclass Grid extends React.Component {\n  render() {\n    return (\n      <div style={styles.container}>\n        <div style={styles.header}>\n          {bingo.map((letter, index) => (\n            <HeaderCase\n              index={index}\n              letter={letter}\n              playerNumbers={this.props.playerNumbers}\n              gridNumbers={this.props.gridNumbers}\n            />\n          ))}\n        </div>\n        {this.props.start &&\n          <>\n            <Sound sound=\"start\" />\n            <div style={styles.wrapper}>\n              {this.props.gridNumbers.map(number => (\n                <Case\n                  number={number}\n                  playerNumbers={this.props.playerNumbers}\n                  finish={this.props.finish}\n                  gameNumbers={this.props.gameNumbers}\n                  toggleNumber={this.props.toggleNumber}\n                />)\n              )}\n            </div>\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nexport default Grid;\n","import React from 'react';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    width: '100%',\n    alignItems: 'center',\n    height: 30,\n  },\n  count: {\n    flex: 1,\n    color: '#999',\n  },\n  game: {\n    padding: '0 10px 0 20px',\n    fontWeight: 'bold',\n  },\n  player: {\n    paddingRight: 10,\n  },\n  quit: {\n    paddingRight: 20,\n    background: '#FEE',\n    padding: '3px 10px',\n    border: '2px solid #FCC',\n    color: '#F66',\n    borderRadius: 3,\n    cursor: 'pointer',\n  }\n};\n\nclass GameInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  // TODO : Supprimer duplication\n  render() {\n    if (this.props.admin) {\n      return (\n        <div style={styles.container}>\n          <span style={styles.game}>{this.props.gameName}</span>\n          <span style={styles.count}>ADMINISTRATION</span>\n          <span\n            style={styles.quit}\n            onClick={this.props.quitGame}\n          >\n            Quitter\n          </span>\n        </div>\n      );\n    } else if (this.props.gridNumbers.length === 0) {\n      return (\n        <div style={styles.container}></div>\n      );\n    }\n\n    return (\n      <div style={styles.container}>\n        <span style={styles.game}>{this.props.gameName}</span>\n        <span style={styles.count}>\n          {this.props.playersCount} joueur{this.props.playersCount > 1 && 's'}\n        </span>\n        <span style={styles.player}>{this.props.playerName}</span>\n        <span\n          style={styles.quit}\n          onClick={this.props.quitGame}\n        >\n          Quitter\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default GameInfo;\n","import React from 'react';\nimport hash from 'object-hash';\n\nconst styles = {\n  container: {\n    textAlign: 'center',\n  },\n  menuOpened: {\n    background: '#EEE',\n    border: '2px solid #666',\n    color: '#666',\n    padding: 20,\n    width: '75%',\n    maxWidth: '250px',\n    margin: '20px auto',\n    fontSize: '1.5em',\n    borderRadius: 10,\n  },\n  header: {\n    cursor: 'pointer',\n  },\n  menuClosed: {\n    textDecoration: 'underline',\n    color: '#CCC',\n    marginTop: 40,\n    cursor: 'pointer',\n  },\n  form: {\n    borderTop: '1px solid #CCC',\n    marginTop: 20,\n  },\n  label: {\n    display: 'flex',\n    width: '100%',\n    textAlign: 'right',\n    marginTop: 20,\n    alignItems: 'center',\n  },\n  input: {\n    flex: 1,\n    width: '100%',\n    outline: 'none',\n    fontSize: '0.75em',\n    padding: '3px 10px',\n    border: 0,\n    background: '#DDD',\n    borderBottom: '1px solid #BBB',\n    borderRadius: 0,\n    color: '#333',\n  },\n  field: {\n    flex: '0 70px',\n    marginRight: 20,\n    fontSize: '0.75em',\n    boxSizing: 'border-box',\n  },\n  go: {\n    display: 'inline-block',\n    margin: '20px auto 0',\n    background: '#E6E6E6',\n    color: '#CCC',\n    padding: '5px 20px',\n    borderRadius: 10,\n  },\n  goActivated: {\n    background: '#666',\n  }\n};\n\nclass PlayerForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pass: '',\n    };\n  }\n\n  toggleForm = (form) => (() => {\n    let futureForm = null;\n    if (this.props.formOpened !== form) {\n      futureForm = form;\n    }\n    this.setState({pass: ''});\n    this.props.changeFormOpened(futureForm);\n  });\n\n  changeValue = (field) => ((event) => {\n    if (field === 'pass') {\n      this.setState({pass: event.target.value});\n    } else if (field === 'game') {\n      this.props.changeGameName(event.target.value);\n    } else if (field === 'player') {\n      this.props.changePlayerName(event.target.value);\n    }\n  });\n\n  createGame = () => {\n    this.props.createGame(this.state.pass);\n  };\n\n  render() {\n    return (\n      <div style={styles.container}>\n        {this.props.formOpened !== 'create' && (\n          <div style={styles.menuOpened}>\n            <div\n              style={styles.header}\n              onClick={this.toggleForm('join')}\n            >\n              <b>Joindre</b> une partie\n            </div>\n            {this.props.formOpened === 'join' && (\n              <div style={styles.form}>\n                <label\n                  htmlFor=\"gameName\"\n                  style={styles.label}\n                >\n                  <div style={styles.field}>Partie</div>\n                  <input\n                    style={styles.input}\n                    value={this.props.gameName}\n                    id=\"gameName\"\n                    onChange={this.changeValue('game')}\n                  />\n                </label>\n\n                <label\n                  htmlFor=\"playerName\"\n                  style={styles.label}\n                >\n                  <div style={styles.field}>Prénom</div>\n                  <input\n                    style={styles.input}\n                    value={this.props.playerName}\n                    id=\"playerName\"\n                    onChange={this.changeValue('player')}\n                  />\n                </label>\n\n                <div\n                  style={{\n                    ...styles.go,\n                    ...(this.props.gameName && this.props.playerName && styles.goActivated)\n                  }}\n                  onClick={this.props.joinGame}\n                >\n                  Go !\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n        {this.props.formOpened !== 'join' && (\n          <div style={this.props.formOpened === 'create' ? styles.menuOpened : styles.menuClosed}>\n            <div\n              style={styles.header}\n              onClick={this.toggleForm('create')}\n            >\n              <b>Administrer</b> une partie\n            </div>\n            {this.props.formOpened === 'create' && (\n              <div style={styles.form}>\n                <label\n                  htmlFor=\"gameName\"\n                  style={styles.label}\n                >\n                  <div style={styles.field}>Partie</div>\n                  <input\n                    style={styles.input}\n                    value={this.props.gameName}\n                    id=\"gameName\"\n                    onChange={this.changeValue('game')}\n                  />\n                </label>\n\n                <label\n                  htmlFor=\"gamePass\"\n                  style={styles.label}\n                >\n                  <div style={styles.field}>Clef</div>\n                  <input\n                    type=\"password\"\n                    style={styles.input}\n                    value={this.state.pass}\n                    id=\"gamePass\"\n                    onChange={this.changeValue('pass')}\n                  />\n                </label>\n\n                <div\n                  style={{\n                    ...styles.go,\n                    ...(this.props.gameName && this.state.pass && styles.goActivated)\n                  }}\n                  onClick={this.createGame}\n                >\n                  Go !\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default PlayerForm;\n","import React from 'react';\n\nconst styles = {\n  number: {\n    display: 'flex',\n    width: 20,\n    height: 20,\n    borderRadius: 10,\n    background: '#EEE',\n    color: '#AAA',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: '0.75em',\n    marginBottom: 5,\n  },\n  checked: {\n    background: '#EFE',\n    color: '#6C6',\n  },\n  mistake: {\n    background: '#FEE',\n    color: '#C66',\n  },\n  oversight: {\n    background: '#FED',\n    color: '#FA0',\n  },\n  grid: {\n    maxWidth: 150,\n    display: 'grid',\n    gridTemplate: 'repeat(5, 1fr) / repeat(5, 1fr)',\n    gridAutoFlow: 'column',\n  },\n};\n\nclass AdminPlayerGrid extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  styleNumber = (number) => {\n    if (number === '_') {\n      return null;\n    }\n\n    if (this.props.gameNumbers.includes(number)) {\n      if (this.props.playerNumbers.includes(number)) {\n        return styles.checked;\n      } else {\n        return styles.oversight;\n      }\n    } else if (this.props.playerNumbers.includes(number)) {\n      return styles.mistake;\n    }\n  };\n/*\n<div style={{\n  ...styles.number,\n}}>*/\n  render() {\n    return (\n      <div style={styles.grid}>\n        {this.props.gridNumbers.map(number => (\n          <div style={{\n            ...styles.number,\n            ...this.styleNumber(number),\n          }}>{number === '_' ? '' : number}</div>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default AdminPlayerGrid;\n","import React from 'react';\nimport AdminPlayerGrid from './AdminPlayerGrid';\n\nconst styles = {\n  container: {\n    display: 'inline-block',\n    width: 140,\n    padding: 5,\n    margin: 5,\n    background: '#F9F9F9',\n    borderRadius: 5,\n  },\n  winner: {\n    background: '#0D0',\n  },\n  loser: {\n    background: '#D00',\n  },\n  title: {\n    textAlign: 'center',\n    marginBottom: 10,\n  }\n};\n\nclass AdminPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  render() {\n    return (\n      <div style={{\n        ...styles.container,\n        ...(this.props.winner && styles.winner),\n        ...(this.props.player.finish && !this.props.winner && styles.loser)\n      }}>\n        <div style={styles.title}>\n          {this.props.player.name}\n          {this.props.player.auto && ' (auto)'}\n        </div>\n        <AdminPlayerGrid\n          playerNumbers={this.props.player.numbers}\n          gridNumbers={this.props.player.grid}\n          gameNumbers={this.props.gameNumbers}\n        />\n      </div>\n    );\n  }\n}\n\nexport default AdminPlayer;\n","import React from 'react';\nimport AdminPlayer from './AdminPlayer';\nimport Sound from './Sound';\n\nconst styles = {\n  container: {\n    marginTop: 20,\n  },\n  title: {\n    fontWeight: 'bold',\n    paddingRight: 20,\n    fontSize: '1.5em',\n    margin: '30px 0',\n  },\n  grid: {\n    margin: '30px auto',\n    maxWidth: 400,\n    display: 'grid',\n    gridTemplateColumns: 'repeat(15, 1fr)',\n  },\n  number: {\n    display: 'flex',\n    width: 20,\n    height: 20,\n    borderRadius: 10,\n    background: '#EEE',\n    color: '#AAA',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: '0.75em',\n    marginBottom: 5,\n  },\n  drawn: {\n    background: '#999',\n    color: '#EEE',\n  },\n  draw: {\n    background: '#EFE',\n    padding: '3px 10px',\n    border: '2px solid #ADA',\n    color: '#6C6',\n    borderRadius: 3,\n    cursor: 'pointer',\n  },\n  reinit: {\n    background: '#EEF',\n    padding: '3px 10px',\n    border: '2px solid #AAD',\n    color: '#66C',\n    borderRadius: 3,\n    cursor: 'pointer',\n    marginRight: 10,\n  },\n  list: {\n  },\n};\n\nconst allNumbers = [...Array(75).keys()].map(number => number + 1);\n\nclass Admin extends React.Component {\n  render() {\n    return (\n      <div style={styles.container}>\n        {this.props.start ?\n          <>\n            <div>\n              <Sound sound=\"begin\" />\n              <span style={styles.title}>Numéros</span>\n              {!this.props.winner && this.props.gameNumbers.length < 75 && (\n                <span\n                  style={styles.draw}\n                  onClick={this.props.drawNumber}\n                >Tirer un numéro</span>\n              )}\n            </div>\n            <div style={styles.grid}>\n              {allNumbers.map(number => (\n                <div style={{\n                  ...styles.number,\n                  ...(this.props.gameNumbers.includes(number) && styles.drawn)\n                }}>\n                  {number}\n                </div>\n              ))}\n            </div>\n          </> : (this.props.players.length ?\n            <div>\n              <span\n                style={styles.draw}\n                onClick={this.props.startMatch}\n              >Démarrer la partie</span>\n            </div> : <br />)\n        }\n\n        <div style={styles.title}>{this.props.players.length} participant{this.props.players.length > 1 && 's'}</div>\n        <div style={styles.list}>\n          {this.props.players.map(player => (\n            <AdminPlayer\n              player={player}\n              winner={this.props.winner === player.key}\n              gameNumbers={this.props.gameNumbers}\n            />\n          ))}\n        </div>\n\n        <br />\n        <div>\n          {this.props.start &&\n            <span\n              style={styles.reinit}\n              onClick={this.props.reinitMatch}\n            >Réinitialiser la partie</span>\n          }\n          <span\n            style={styles.reinit}\n            onClick={this.props.cancelMatch}\n          >Supprimer la partie</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Admin;\n","import React from 'react';\n\nconst styles = {\n  container: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    left: 0,\n    bottom: 0,\n    minHeight: '100vw',\n  },\n  background: {\n    position: 'absolute',\n    height: '100%',\n    width: '100%',\n    background: '#FFF',\n    opacity: 0.75,\n  },\n  wrapper: {\n    position: 'sticky',\n    margin: '170px auto 50px',\n    maxWidth: '75%',\n    width: 400,\n    background: '#EEE',\n    border: '2px solid #666',\n    color: '#666',\n    padding: 20,\n    fontSize: '1.25em',\n    borderRadius: 10,\n  },\n  actions: {\n    marginTop: 20,\n    textAlign: 'center',\n  },\n  button: {\n    display: 'inline-block',\n    margin: '10px 20px',\n    background: '#E6E6E6',\n    color: '#999',\n    padding: '5px 20px',\n    borderRadius: 10,\n    cursor: 'pointer',\n  },\n  confirm: {\n    background: '#666',\n    color: '#CCC',\n  },\n  cancel: {\n  },\n};\n\nclass Message extends React.Component {\n  onClick = (ok) => (() => this.props.message.callback(ok));\n\n  getContent = () => {\n    const content = this.props.message.content;\n    if (typeof content === 'function') {\n      return content(this.props.message.data);\n    }\n\n    return content;\n  };\n\n  render() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n\n    if (this.props.message.timeout) {\n      this.timer = setTimeout(() => {\n        this.props.removeMessage();\n      }, this.props.message.timeout);\n    }\n\n    return (\n      <div style={styles.container}>\n        <div style={styles.background}></div>\n        <div style={styles.wrapper}>\n          <div style={styles.content}>{this.getContent()}</div>\n          {(this.props.message.confirm || this.props.message.cancel) && (\n            <div style={styles.actions}>\n              {this.props.message.confirm && (\n                <div\n                  style={{\n                    ...styles.button,\n                    ...styles.confirm\n                  }}\n                  onClick={this.onClick(true)}\n                >{this.props.message.confirm}</div>\n              )}\n              {this.props.message.cancel && (\n                <div\n                  style={{\n                    ...styles.button,\n                    ...styles.cancel\n                  }}\n                  onClick={this.onClick(false)}\n                >{this.props.message.cancel}</div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Message;\n","function generateNumbers(withFree = true) {\n  return [\n    ...generateBlockNumbers(1, 15, 5),\n    ...generateBlockNumbers(16, 30, 5),\n    ...generateBlockNumbersWithFree(31, 45, 5, withFree, 2),\n    ...generateBlockNumbers(46, 60, 5),\n    ...generateBlockNumbers(61, 75, 5),\n  ];\n}\n\nfunction generateBlockNumbers(from, to, count = 5) {\n  const numbers = [...Array(to - from + 1).keys()]\n    .sort(() => 0.5 - Math.random())\n    .map(x => x + from)\n    .slice(0, count);\n  return numbers;\n}\n\nfunction generateBlockNumbersWithFree(from, to, count, withFree, freePosition) {\n  const numbers = generateBlockNumbers(from, to, count);\n  if (withFree) {\n    numbers[freePosition] = '_';\n  }\n\n  return numbers;\n}\n\nexport { generateNumbers, generateBlockNumbers };\n","import React from 'react';\nimport Firebase from './utils/firebase';\nimport hash from 'object-hash';\n\nimport Grid from './components/Grid';\nimport GameInfo from './components/GameInfo';\nimport PlayerForm from './components/PlayerForm';\nimport Admin from './components/Admin';\nimport Message from './components/Message';\nimport Sound from './components/Sound';\n\nimport { generateNumbers, generateBlockNumbers } from './utils/numbers';\n\nconst styles = {\n  container: {\n    margin: 'auto',\n    maxWidth: '500px',\n    padding: '20px 10px',\n  },\n  newNumber: {\n    display: 'block',\n    textAlign: 'center',\n    fontWeight: 'bold',\n    fontSize: '3em',\n    marginTop: 20,\n  }\n};\n\nconst GAME_EMPTY = {\n  key: null,\n  name: null,\n  hash: '',\n  count: 0,\n  players: [],\n  numbers: [],\n  winner: null,\n  start: false,\n};\n\nconst PLAYER_EMPTY = {\n  key: null,\n  name: null,\n  grid: [],\n  numbers: [],\n  finish: false,\n};\n\nconst images = [\n  'yoshi',\n  'mario',\n  'peach',\n  'toad',\n];\n\n\n// TODO config de game (auto / affichage new number / multi vainqueurs)\n// TODO réinitialiser une partie\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.MESSAGES = {\n      default: {\n        confirm: 'Ok !',\n        cancel: false,\n        callback: this.removeMessage,\n        timeout: false,\n      },\n      fullGrid: {\n        content: <span>Il semblerait que tu aies un <b>BINGO !</b><br />Attention, si tu soumets une grille avec une erreur tu seras éliminé ! <br /><br />Veux-tu soumettre ta grille ou la corriger ?</span>,\n        confirm: 'Soumettre !',\n        cancel: 'Corriger',\n        callback: this.submitGrid,\n      },\n      winner: {\n        content: () => <span>Tu es le vainqueur de cette partie, bravo !!<br /><br /><center><img src={`./${images[Math.floor(Math.random() * images.length)]}.gif`} alt=\"\" /></center><Sound sound=\"first\" /></span>,\n      },\n      eliminated: {\n        content: <span>Tu as des erreurs dans ta grille, tu as été éliminé :(<Sound sound=\"loser\" /></span>,\n      },\n      notExists: {\n        content: <span>Cette partie n'existe pas, choisis en une autre ou lance la en choissant une clef !</span>,\n        confirm: 'La lancer !',\n        cancel: 'Une autre...',\n        callback: this.maybeCreate,\n      },\n      newNumber: {\n        content: data => <center>Nouveau nombre !<br /><span style={styles.newNumber}>{data.number}</span></center>,\n        confirm: false,\n        timeout: 1500,\n      },\n      newNumberAdmin: {\n        content: data => <span style={styles.newNumber}>{data.number}</span>,\n        cancel: 'Retirer',\n        callback: this.drawNewMaybe,\n      },\n      badHash: {\n        content: <span>Ce mot de passe ne correspond pas à celui choisi lors de la création de la partie.</span>,\n      },\n      announceWinner: {\n        content: data => <span>Cette partie est finie ! Le vainqueur est ...<br /><br /><center><b>{data.name}</b></center><Sound sound=\"final\" /></span>,\n      },\n      displayWinner: {\n        content: data => <span>Fin de la partie... Une personne a été meilleure que toi :/ Bravo au vainqueur ...<br /><br /><center><b>{data.name}</b></center><Sound sound=\"final\" /></span>,\n        confirm: 'Quitter la partie',\n        callback: this.quitGame,\n      },\n      waitGame: {\n        content: () => <span>Partie en attente de lancement, merci de patienter...<br /><br /><center><img src={`./${images[Math.floor(Math.random() * images.length)]}.gif`} alt=\"\" /></center></span>,\n        confirm: 'Quitter',\n        callback: this.quitGame,\n      },\n      inProgress: {\n        content: <span>Désolé, la partie est en cours, il n'est plus possible de la rejoindre :(</span>,\n      },\n      zeroPlayer: {\n        content: <span>La partie bien que lancée n'a plus de joueur....</span>,\n        confirm: 'Réinitialiser',\n        cancel: 'Quitter',\n        callback: this.reinitGame,\n      },\n      cleanGame: {\n        content: <span>Malheureusement, la partie a été réinitialisée...</span>,\n        callback: this.quitGame,\n      },\n      askReinit: {\n        content: <span>Es-tu sûr de vouloir réinitialiser la partie ?</span>,\n        cancel: 'Annuler',\n        callback: this.reinitMatch,\n      },\n      askCancel: {\n        content: <span>Es-tu sûr de vouloir supprimer la partie ?</span>,\n        cancel: 'Annuler',\n        callback: this.cancelMatch,\n      },\n    };\n    this.ref = Firebase.database().ref('/');\n    this.games = this.ref.child('games');\n    this.players = this.ref.child('players');\n    this.state = {\n      admin: false,\n      formOpened: 'join',\n      game: GAME_EMPTY,\n      player: PLAYER_EMPTY,\n      message: null,\n    };\n  }\n\n  // TODO cookie pour retenir key du player qui peut revenir si page fermée ou quitte\n  quitGame = () => {\n    this.removeMessage();\n\n    if (this.state.game && this.state.game.key) {\n      this.games.child(this.state.game.key).off();\n      this.games.child(this.state.game.key).child('count').off();\n      this.games.child(this.state.game.key).child('numbers').off();\n      this.games.child(this.state.game.key).child('start').off();\n      this.games.child(this.state.game.key).child('winner').off();\n      this.players.orderByChild('game').equalTo(this.state.game.key).off();\n      this.games.orderByChild('name').equalTo(this.state.game.name).off();\n    }\n\n    if (this.state.player && this.state.player.key) {\n      this.players.child(this.state.player.key).off();\n\n      if (this.state.player.numbers.length === 0) {\n        this.players.child(this.state.player.key).remove();\n\n        const gameKey = this.state.game.key;\n        this.games.child(gameKey).child('count').once('value', snap => {\n          this.games.child(gameKey).child('count').set((snap.val() || 1) - 1);\n          this.games.child(gameKey).child('count').off();\n        });\n      }\n    }\n\n    this.setState({\n      admin: false,\n      game: {\n        ...GAME_EMPTY,\n        name: this.state.game.name,\n      },\n      player: {\n        ...PLAYER_EMPTY,\n        name: this.state.player.name,\n      },\n    });\n  };\n\n  reinitMatch = (confirm) => {\n    this.removeMessage();\n    if (confirm) {\n      this.games.child(this.state.game.key).remove();\n      this.initGame(this.state.game.name, this.state.game.hash, null, null);\n    }\n  };\n\n  cancelMatch = (confirm) => {\n    this.removeMessage();\n    if (confirm) {\n      this.games.child(this.state.game.key).remove();\n      this.quitGame();\n    }\n  };\n\n  reinitGame = (confirm) => {\n    if (confirm) {\n      this.removeMessage();\n      this.reinitMatch();\n    } else {\n      this.quitGame();\n    }\n  };\n\n  maybeCreate = (confirm) => {\n    if (!confirm) {\n      this.setState({\n        game: GAME_EMPTY,\n      });\n    } else {\n      this.changeFormOpened('create');\n    }\n    this.removeMessage();\n  };\n\n  drawNewMaybe = (confirm) => {\n    this.removeMessage();\n    if (!confirm) {\n      this.drawNumber();\n    }\n  };\n\n  submitGrid = (confirm) => {\n    if (!confirm) {\n      this.removeMessage();\n    } else {\n      this.players.child(this.state.player.key).child('finish').set(true);\n      this.compareGrid();\n    }\n  };\n\n  displayMessage = (message, data = {}) => {\n    this.setState({\n      message: {\n        ...this.MESSAGES.default,\n        ...this.MESSAGES[message],\n        data,\n      },\n    });\n  };\n\n  compareGrid = () => {\n    if (this.state.player.numbers.every(number => this.state.game.numbers.includes(number))) {\n      this.games.child(this.state.game.key).child('winner').set(this.state.player.key);\n    } else {\n      this.displayMessage('eliminated');\n    }\n  };\n\n  toggleNumber = (number) => {\n    const index = this.state.player.numbers.indexOf(number);\n    let numbers = this.state.player.numbers;\n\n    if (index < 0) {\n      numbers.push(number);\n    } else {\n      numbers.splice(index, 1);\n    }\n\n    if (numbers.length >= 24) {\n      this.displayMessage('fullGrid');\n    }\n\n    this.players.child(this.state.player.key).child('numbers').set(numbers);\n  };\n\n  removeMessage = () => {\n    this.setState({message: null});\n  };\n\n  changeGameName = (gameName) => {\n    this.setState({\n      game: {\n        ...this.state.game,\n        name: gameName,\n      },\n    });\n  };\n\n  changePlayerName = (playerName) => {\n    this.setState({\n      player: {\n        ...this.state.player,\n        name: playerName,\n      },\n    });\n  };\n\n  changeFormOpened = (formOpened) => {\n    this.setState({formOpened});\n  };\n\n  searchGame = (gameName, callback) => {\n    this.games.orderByChild('name').equalTo(gameName).once('value', snap => {\n      const val = snap.val();\n\n      if (val === null) {\n        callback(null, null);\n      } else {\n        callback(Object.values(val)[0], Object.keys(val)[0]);\n      }\n    });\n  };\n\n  // TODO cookie avec key du player (ne pas recréer le player)\n  // TODO choix : soit nouvelle grille (et on supprime l'ancien) / soit reprise)\n  joinGame = () => {\n    const gameName = this.state.game.name.trim().toLowerCase();\n    const playerName = this.state.player.name;\n\n    this.searchGame(gameName, (val, key) => {\n      if (key === null) {\n        this.displayMessage('notExists');\n        return null;\n      }\n\n      if (val.winner) {\n        this.players.child(val.winner).once('value', snap => {\n          this.displayMessage('announceWinner', {name: snap.val().name});\n        });\n        return;\n      }\n\n      if (val.start) {\n        this.displayMessage('inProgress');\n        return;\n      }\n\n      const player = {\n        ...PLAYER_EMPTY,\n        name: playerName,\n        grid: generateNumbers(true),\n      };\n      this.displayMessage('waitGame');\n      this.setState({\n        player,\n        game: {\n          ...GAME_EMPTY,\n          name: gameName,\n          key: key,\n        },\n      }, () => {\n        const ref = this.players.push({\n          ...player,\n          game: key,\n        });\n        const playerKey = ref.key;\n        this.setState({\n          player: {\n            ...this.state.player,\n            key: playerKey,\n          },\n        });\n\n        let paint = false;\n        this.games.child(key).on('value', snap => {\n          if (!snap.val()) {\n            this.displayMessage('cleanGame');\n            return;\n          }\n\n          const newNumbers = snap.val().numbers || [];\n          const winner = snap.val().winner;\n          const start = snap.val().start;\n\n          this.setState({\n            game: {\n              ...this.state.game,\n              winner,\n              start,\n              numbers: newNumbers,\n            },\n          });\n\n          if (!start) {\n            return;\n          } else {\n            this.removeMessage();\n          }\n\n          if (paint) {\n            this.displayMessage('newNumber', {number: newNumbers[newNumbers.length - 1]});\n          } else {\n            paint = true;\n          }\n\n          if (winner) {\n            if (this.state.player.key === winner) {\n              this.displayMessage('winner');\n            } else {\n              this.players.child(winner).once('value', snap => {\n                this.displayMessage('displayWinner', {name: snap.val().name});\n              });\n            }\n          }\n        });\n\n        this.games.child(key).child('count').set((val.count || 0) + 1).then(() => {\n          this.games.child(key).child('count').on('value', snap => {\n            this.setState({\n              game: {\n                ...this.state.game,\n                count: snap.val(),\n              },\n            });\n          });\n        });\n\n        this.players.child(playerKey).on('value', snap => {\n          this.setState({\n            player: {\n              ...this.state.player,\n              key: playerKey,\n              finish: (snap.val().finish || false),\n              numbers: (snap.val().numbers || []),\n            },\n          });\n        });\n\n        // TODO then store key in cookie\n      });\n    });\n  };\n\n  createGame = (gamePass) => {\n    const gameHash = hash(gamePass);\n    const gameName = this.state.game.name.trim().toLowerCase();\n\n    this.searchGame(gameName, (val, key) => {\n      this.initGame(gameName, gameHash, val, key);\n    });\n  };\n\n  initGame = (gameName, gameHash, val, key) => {\n    if (key === null) {\n      val = {\n        ...GAME_EMPTY,\n        name: gameName,\n        hash: gameHash,\n      };\n      const ref = this.games.push(val);\n      key = ref.key;\n    } else {\n      if (val.hash !== gameHash) {\n        this.displayMessage('badHash');\n        return null;\n      }\n    }\n\n    this.setState({\n      admin: true,\n      game: {\n        ...GAME_EMPTY,\n        name: val.name,\n        hash: val.hash,\n        key: key,\n      },\n    }, () => {\n      if (val.start && val.count === 0) {\n        this.displayMessage('zeroPlayer');\n        return null;\n      }\n      this.games.child(key).child('numbers').on('value', snap => {\n        this.setState({\n          game: {\n            ...this.state.game,\n            numbers: snap.val() || [],\n          }\n        });\n      });\n      this.games.child(key).child('winner').on('value', snap => {\n        const winner = snap.val();\n\n        this.setState({\n          game: {\n            ...this.state.game,\n            winner,\n          }\n        });\n\n        if (winner) {\n          this.players.child(winner).once('value', snap => {\n            this.displayMessage('announceWinner', {name: snap.val().name});\n          });\n        }\n      });\n      this.games.child(key).child('start').on('value', snap => {\n        this.setState({\n          game: {\n            ...this.state.game,\n            start: !!snap.val(),\n          }\n        });\n      });\n      this.players.orderByChild('game').equalTo(key).on('value', snap => {\n        const players = snap.val() || {};\n        const keys = Object.keys(players);\n        this.setState({\n          game: {\n            ...this.state.game,\n            players: keys.map(playerKey => ({\n              ...PLAYER_EMPTY,\n              ...players[playerKey],\n              key: playerKey,\n            })),\n          }\n        });\n\n        if (this.state.game.start && keys.length === 0) {\n          this.displayMessage('zeroPlayer');\n        }\n      })\n    });\n  };\n\n  drawNumber = () => {\n    if (this.state.game.numbers.length >= 75) {\n      // TODO améliorer suite du process\n      // Fin de la partie\n      return null;\n    }\n\n    const numbers = generateBlockNumbers(1, 75, 75);\n    let index = 0;\n    while (this.state.game.numbers.includes(numbers[index])) {\n      index++;\n    }\n\n    this.games.child(this.state.game.key).child('numbers').set([\n      ...this.state.game.numbers,\n      numbers[index],\n    ]);\n\n    this.displayMessage('newNumberAdmin', {number: numbers[index]});\n  };\n\n  startMatch = () => {\n    this.games.child(this.state.game.key).child('start').set(true);\n  };\n\n  askCancel = () => {\n    this.displayMessage('askCancel');\n  };\n\n  askReinit = () => {\n    this.displayMessage('askReinit');\n  };\n\n  render() {\n    return (\n      <div style={styles.container}>\n        <GameInfo\n          admin={this.state.admin}\n          gameName={this.state.game.name}\n          playerName={this.state.player.name}\n          gridNumbers={this.state.player.grid}\n          playersCount={this.state.game.count}\n          quitGame={this.quitGame}\n        />\n        <Grid\n          playerNumbers={this.state.player.numbers}\n          gridNumbers={this.state.player.grid}\n          finish={this.state.game.winner || this.state.player.finish}\n          start={this.state.game.start}\n          gameNumbers={this.state.game.numbers}\n          toggleNumber={this.toggleNumber}\n        />\n        {!this.state.game.key &&\n          !this.state.admin && (\n          <PlayerForm\n            formOpened={this.state.formOpened}\n            gameName={this.state.game.name}\n            playerName={this.state.player.name}\n            changeGameName={this.changeGameName}\n            changePlayerName={this.changePlayerName}\n            changeFormOpened={this.changeFormOpened}\n            joinGame={this.joinGame}\n            createGame={this.createGame}\n          />\n        )}\n        {this.state.admin && (\n          <Admin\n            drawNumber={this.drawNumber}\n            startMatch={this.startMatch}\n            reinitMatch={this.askReinit}\n            cancelMatch={this.askCancel}\n            gameNumbers={this.state.game.numbers}\n            players={this.state.game.players}\n            winner={this.state.game.winner}\n            start={this.state.game.start}\n          />\n        )}\n        {this.state.message && (\n          <Message\n            message={this.state.message}\n            removeMessage={this.removeMessage}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n// TODO : Router avec le nom de la partie pour lien d'invitation dans l'admin\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}